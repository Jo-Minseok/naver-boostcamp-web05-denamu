name: Update Submodules

on:
  schedule:
    - cron: "0 * * * *"
  workflow_dispatch:

jobs:
  update-submodules:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout parent repo
        uses: actions/checkout@v4
        with:
          submodules: recursive
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Update web05-Denamu
        run: |
          cd web05-Denamu
          git fetch origin main
          git checkout origin/main
          cd ..
          if git status --porcelain | grep -q "web05-Denamu"; then
            git add web05-Denamu
            git commit -m "ğŸ‹ ë°ë‚˜ë¬´ ì„œë¹„ìŠ¤ ë©”ì¸ ë ˆí¬ì§€í† ë¦¬"
          fi

      - name: Update refactor-web05-Denamu
        run: |
          cd refactor-web05-Denamu
          git fetch origin main
          git checkout origin/main
          cd ..
          if git status --porcelain | grep -q "refactor-web05-Denamu"; then
            git add refactor-web05-Denamu
            git commit -m "ğŸ‹ ë°ë‚˜ë¬´ ì„œë¹„ìŠ¤ ì¸ê³µì§€ëŠ¥ ë° ë¦¬íŒ©í† ë§ ë ˆí¬ì§€í† ë¦¬"
          fi

      - name: Update Denamu-iac
        run: |
          cd Denamu-iac
          git fetch origin main
          git checkout origin/main
          cd ..
          if git status --porcelain | grep -q "Denamu-iac"; then
            git add Denamu-iac
            git commit -m "ğŸ‹ ë°ë‚˜ë¬´ ì¸í”„ë¼ í…Œë¼í¼ ë ˆí¬ì§€í† ë¦¬"
          fi

      - name: Push changes
        run: git push origin main
